@model IEnumerable<ProductModel>

<!-- Start Slider -->
<div id="slides-shop" class="cover-slides">
	<ul class="slides-container">
		<li class="text-center">
			<img src="~/images/banner-01.jpg" alt="">
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<h1 class="m-b-20"><strong>Welcome To <br> Freshshop</strong></h1>
						<p class="m-b-40">See how your users experience your website in realtime or view <br> trends to
							see any changes in performance over time.</p>
						<p><a class="btn hvr-hover" href="#">Shop New</a></p>
					</div>
				</div>
			</div>
		</li>
		<li class="text-center">
			<img src="~/images/banner-02.jpg" alt="">
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<h1 class="m-b-20"><strong>Welcome To <br> Freshshop</strong></h1>
						<p class="m-b-40">See how your users experience your website in realtime or view <br> trends to
							see any changes in performance over time.</p>
						<p><a class="btn hvr-hover" href="#">Shop New</a></p>
					</div>
				</div>
			</div>
		</li>
		<li class="text-center">
			<img src="~/images/banner-03.jpg" alt="">
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<h1 class="m-b-20"><strong>Welcome To <br> Freshshop</strong></h1>
						<p class="m-b-40">See how your users experience your website in realtime or view <br> trends to
							see any changes in performance over time.</p>
						<p><a class="btn hvr-hover" href="#">Shop New</a></p>
					</div>
				</div>
			</div>
		</li>
	</ul>
	<div class="slides-navigation">
		<a href="#" class="next"><i class="fa fa-angle-right" aria-hidden="true"></i></a>
		<a href="#" class="prev"><i class="fa fa-angle-left" aria-hidden="true"></i></a>
	</div>
</div>
<!-- End Slider -->
<!-- Start Shop Page  -->
<div class="shop-box-inner">
	<div class="container">
		@Html.Partial("_NotificationPartial")
		<div class="row">
			<div class="col-xl-9 col-lg-9 col-sm-12 col-xs-12 shop-content-right">
				<div class="right-product-box">
					<div class="product-item-filter row">
						<div class="col-12 col-sm-8 text-center text-sm-left">
							<div class="toolbar-sorter-right">
								<span>Sort by </span>
								<select id="basic" class="selectpicker show-tick form-control" data-placeholder="$ USD">
									<option data-display="Select">Nothing</option>
									<option value="1">Popularity</option>
									<option value="2">High Price → High Price</option>
									<option value="3">Low Price → High Price</option>
									<option value="4">Best Selling</option>
								</select>
							</div>
							<p>Showing all @Model.Count() results</p>
						</div>
						<div class="col-12 col-sm-4 text-center text-sm-right">
							<ul class="nav nav-tabs ml-auto">
								<li>
									<a class="nav-link active" href="#grid-view" data-toggle="tab"> <i
											class="fa fa-th"></i> </a>
								</li>
								<li>
									<a class="nav-link" href="#list-view" data-toggle="tab"> <i
											class="fa fa-list-ul"></i> </a>
								</li>
							</ul>
						</div>
					</div>

					<div class="product-categorie-box">
						<div class="tab-content">
							<div role="tabpanel" class="tab-pane fade show active" id="grid-view">
								<div class="row">
									@foreach (var item in Model)
									{
										<!-- Product item -->
										<div class="col-sm-6 col-md-6 col-lg-4 col-xl-4">
											<div class="products-single fix">
												<div class="box-img-hover">
													<div class="type-lb">
														<p class="sale">Sale</p>
													</div>
													<img src="~/images/@item.Image" class="img-fluid" alt="@item.Name">
													<div class="mask-icon">
														<ul>
															<li><a href="#" data-toggle="tooltip" data-placement="right"
																	title="View"><i class="fas fa-eye"></i></a></li>
															<li><a href="#" data-toggle="tooltip" data-placement="right"
																	title="Compare"><i class="fas fa-sync-alt"></i></a></li>
															<li><a href="#" data-toggle="tooltip" data-placement="right"
																	title="Add to Wishlist"><i class="far fa-heart"></i></a>
															</li>
														</ul>
														<a class="cart" asp-action="Add" asp-controller="Cart"
															asp-route-id="@item.Id">Add to Cart</a>
													</div>
												</div>
												<a asp-action="Details" asp-controller="Product" asp-route-id="@item.Id">
													<div class="why-text">
														<h4>@item.Name</h4>
														<h6>@item.Category.Name</h6>
														<h5> @item.Price <span>VND</span></h5>
													</div>
												</a>
											</div>
										</div>
									}
								</div>
							</div>
							<div role="tabpanel" class="tab-pane fade" id="list-view">
								@foreach (var item in Model)
								{
									<div class="list-view-box">
										<div class="row">
											<div class="col-sm-6 col-md-6 col-lg-4 col-xl-4">
												<div class="products-single fix">
													<div class="box-img-hover">
														<div class="type-lb">
															<p class="sale">Sale</p>
														</div>
														<img src="~/images/@item.Image" class="img-fluid" alt="@item.Name">
														<div class="mask-icon">
															<ul>
																<li><a href="#" data-toggle="tooltip" data-placement="right"
																		title="View"><i class="fas fa-eye"></i></a></li>
																<li><a href="#" data-toggle="tooltip" data-placement="right"
																		title="Compare"><i class="fas fa-sync-alt"></i></a>
																</li>
																<li><a href="#" data-toggle="tooltip" data-placement="right"
																		title="Add to Wishlist"><i
																			class="far fa-heart"></i></a></li>
															</ul>
														</div>
													</div>
												</div>
											</div>
											<a asp-action="Details" asp-controller="Product" asp-route-id="@item.Id">

												<div class="col-sm-6 col-md-6 col-lg-8 col-xl-8">
													<div class="why-text full-width">
														<h4>@item.Name</h4>
														<h5>@item.Price <span>VND</span></h5>
														<p>@item.Description</p>
														<a class="btn hvr-hover" asp-action="Add" asp-controller="Cart"
															asp-route-id="@item.Id">Add to Cart</a>
													</div>

												</div>
											</a>
										</div>
									</div>
								}
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-xl-3 col-lg-3 col-sm-12 col-xs-12 sidebar-shop-left">
				<!-- loc tim kiem o day -->
				@Html.Partial("_SidebarPartial")
			</div>
		</div>
	</div>
</div>
<!-- End Shop Page -->
<!-- Start Instagram Feed  -->
<div class="instagram-box">
	<div class="main-instagram owl-carousel owl-theme">
		<div class="item">
			<div class="ins-inner-box">
				<img src="images/instagram-img-01.jpg" alt="" />
				<div class="hov-in">
					<a href="#"><i class="fab fa-instagram"></i></a>
				</div>
			</div>
		</div>
		<div class="item">
			<div class="ins-inner-box">
				<img src="images/instagram-img-02.jpg" alt="" />
				<div class="hov-in">
					<a href="#"><i class="fab fa-instagram"></i></a>
				</div>
			</div>
		</div>
		<div class="item">
			<div class="ins-inner-box">
				<img src="images/instagram-img-03.jpg" alt="" />
				<div class="hov-in">
					<a href="#"><i class="fab fa-instagram"></i></a>
				</div>
			</div>
		</div>
		<div class="item">
			<div class="ins-inner-box">
				<img src="images/instagram-img-04.jpg" alt="" />
				<div class="hov-in">
					<a href="#"><i class="fab fa-instagram"></i></a>
				</div>
			</div>
		</div>
		<div class="item">
			<div class="ins-inner-box">
				<img src="images/instagram-img-05.jpg" alt="" />
				<div class="hov-in">
					<a href="#"><i class="fab fa-instagram"></i></a>
				</div>
			</div>
		</div>
		<div class="item">
			<div class="ins-inner-box">
				<img src="images/instagram-img-06.jpg" alt="" />
				<div class="hov-in">
					<a href="#"><i class="fab fa-instagram"></i></a>
				</div>
			</div>
		</div>
		<div class="item">
			<div class="ins-inner-box">
				<img src="images/instagram-img-07.jpg" alt="" />
				<div class="hov-in">
					<a href="#"><i class="fab fa-instagram"></i></a>
				</div>
			</div>
		</div>
		<div class="item">
			<div class="ins-inner-box">
				<img src="images/instagram-img-08.jpg" alt="" />
				<div class="hov-in">
					<a href="#"><i class="fab fa-instagram"></i></a>
				</div>
			</div>
		</div>
		<div class="item">
			<div class="ins-inner-box">
				<img src="images/instagram-img-09.jpg" alt="" />
				<div class="hov-in">
					<a href="#"><i class="fab fa-instagram"></i></a>
				</div>
			</div>
		</div>
		<div class="item">
			<div class="ins-inner-box">
				<img src="images/instagram-img-05.jpg" alt="" />
				<div class="hov-in">
					<a href="#"><i class="fab fa-instagram"></i></a>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- End Instagram Feed  -->
@section Scripts {
	<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
	<script src="https://code.jquery.com/ui/1.14.1/jquery-ui.js"></script>
	<script>
		$(document).ready(function () {
			// Tạo format tiền VND
			const formatter = new Intl.NumberFormat('vi-VN', {
				style: 'currency',
				currency: 'VND'
			});

			// Lấy giá trị từ URL parameters
			function getUrlParameter(name) {
				name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
				var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
				var results = regex.exec(location.search);
				return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
			}

			// Lấy giá trị startprice và endprice từ URL
			const startPrice = parseInt(getUrlParameter('startprice')) || 5000;
			const endPrice = parseInt(getUrlParameter('endprice')) || 30000;

			$(function () {
				$("#slider-range").slider({
					range: true,
					min: 5000,
					max: 100000,
					step: 5000,
					values: [startPrice, endPrice], // Sử dụng giá trị từ URL
					slide: function (event, ui) {
						const minPrice = formatter.format(ui.values[0]);
						const maxPrice = formatter.format(ui.values[1]);
						$("#amount").val(minPrice + " - " + maxPrice);
					}
				});

				// Format giá trị ban đầu sử dụng giá trị từ URL
				const initialMin = formatter.format($("#slider-range").slider("values", 0));
				const initialMax = formatter.format($("#slider-range").slider("values", 1));
				$("#amount").val(initialMin + " - " + initialMax);
			});

			// code btn lọc giá sản phẩm
			$('.btn-locgia').on('click', function () {
				var url = $(this).data("current_url");
				if (url) {
					window.location = url + "?startprice=" + $("#slider-range").slider("values", 0) +
						"&endprice=" + $("#slider-range").slider("values", 1);
				}
				return false;
			});
		}); 
	</script>

	<script>
		$(document).ready(function () {
			$('.add-btn-wishlist').click(function () {
				var Id = $(this).data("product_id");

				$.ajax({
					type: "POST",
					url: "@Url.Action("AddWishlist", "Home")",
					data: { Id: Id },
					success: function (result) {
						if (result) {
							Swal.fire("Thêm vào danh sách yêu thích", "", "success");
						}
					},
				});
			});
		});
	</script>

	<script>
		$(document).ready(function () {
			$('.add-btn-compare').click(function () {
				var Id = $(this).data("product_id");

				$.ajax({
					type: "POST",
					url: "@Url.Action("AddCompare", "Home")",
					data: { Id: Id },
					success: function (result) {
						if (result) {
							Swal.fire("Thêm so sánh thành công", "", "success");
						}
					},
				});
			});
		});
	</script>
}